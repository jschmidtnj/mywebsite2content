# Creating joshuaschmidt.tech

This website has been long overdue. I created a simple wordpress website a last year under this domain, but I never posted on it because I guess I wasn't proud of it. The website was too simple, difficult to make stylistic changes to, bloated, costly to host, and slow. But this past summer with a year more of web development and a few interesting projects under my belt, I decided to try again. In the end I created an open-source, fast and super scalable website, using all of the newest technologies that I could think of. The frontend is powered by Nuxt, a Vue-based framework that in this case produces a static website. It uses custom schema.org markup for great SEO, in addition to opengraph and twitter cards for social sharing. The backend is powered by a graphql api written in Go, which allows for very fast graphql queries in comparison to something like Apollo, which is written in Node.js. It also uses elasticsearch for searching for content, and a mongodb database for state management. In addition, I created a flutter mobile app, utilizing the same api as the website to show cross-platform compatibility. I used an electron wrapper to create a native desktop application as well, and finally added an Accelerated Mobile Pages (AMP) website, using (you guessed it) the same api. Best of all, besides the domain all of the services are free.

### Why use so many services

I just threw a lot of different technologies out there, and you can feel free to google any of them that you aren't familiar with. The point of this project wasn't to just create a use-case for these services. It was the other way around - I wanted to create a super-fast cross-platform stack that allows for simple content consumption everywhere. The best way to do this is to create a universal api, and currently the best api framework is graphql. This necessitated using Golang because of its speed, and a Redis cache to store api results, etc. And soon you have 10 different services / technologies that all need to work in tandem to make the experience possible.

### Project setup

You can view this project at [github.com/jschmidtnj/mywebsite2](https://github.com/jschmidtnj/mywebsite2). The folder structure is the best place to start. `amp` is where the accelerated mobile pages framework code is. All it's doing is running a node.js server (written in typescript) that handles endpoints based on the blog id or project id, and gets the necessary data from the api to return the amp-html response. A Node.js server is used because anything faster is not really necessary - the pages will get cached by Cloudflare or Google, and then future requests will be served by them instead of hitting the Node.js server. It is currently hosted with heroku.

The `docs` folder contains documentation for the website. It is written in VuePress (static markdown file website generator) and hosted on github pages. It needs a lot of work, and I just didn't put in the time to make the documentation perfect, especially since this project is changing so quickly. Soon I will add more though - I promise.

The `electron` folder contains a simple Node script for deploying an electron desktop version of the website to google cloud platform storage, so that users can download it and run it on their machines. GCP was used for the sole reason that they have the best free tier, allowing 5gb of free cloud storage forever. Azure and AWS would also work for all of these cloud services.

The `flutter` folder contains the source code for a mobile application, with the search and post viewing functionality that the website provides. One of the current goals is to expand on these limited features, maybe by providing local storage of posts or leveraging comments and sharing in a way that you can do more easily on mobile devices.

The `graphql` folder contains the api source code, with the main logic for this application. It is using a Redis cache for speeding up api results, uses elasticsearch for searching through blogs and posts, and has a complete authentication system using json web tokens for creating users, resetting passwords and verifying email. This authentication system allows for verified admin requests to add new content, utilizing recaptcha to block bots and hackers. Mongodb is used for storing the state, meaning this api can run in a serverless environment or even have multiple instances running at once, like in a kubernetes cluster. Cloud storage is used for storing images and files, which cached in Cloudflare's cdn. The emails are all sent using Sendgrid. This api is designed from the ground up for speed and flexibility, to ensure that it can be deployed anywhere and be super fast.

The `init` folder just contains a script for initializing the settings for the elasticsearch server (using bonsai.io currently for free tier) and for adding an admin user.

The `nuxt` folder contains the main web application. In addition just the static website, it also boasts a PWA (progressive web app) that can be downloaded to your phone, and mappings to the amp version of the website. It uses bootstrap for the styling, and has a Vuex store for browser caching api requests. This way when navigating the website you don't have to make as many requests, like if you go to the home page multiple times. Currently it is hosted on Netlify, since I determined that was the best service so far, but I also have sample configurations for now.sh, app engine, heroku and firebase.

Finally, the `shortlink` folder contains a link shortener application. Also using the main api, this link shortener just creates a shortened link (similar to bit.ly) for website posts or for any other website. It also uses recaptcha and the same authentication strategy as the other website to keep it consistent.

The last few files outside of these folders are scripts for automatically fixing formatting, linting and running updates to package dependencies. There's an init file for installing all dependencies when you first clone the project. And there's continuous integration and deployment (CI/CD) using travis, which is used to deploy the graphql, flutter, and electron code. The ci/cd for the website is through netlify.

### Last words (for now)

Feel free to make pull requests or fork this project to create your own blog / project website. It was really fun to develop and I will be continuing to work on it for the near future. There are still so many features I want to add like some machine learning analytics, a chat bot, and social sign-in. The good news is that I think this project is pretty future-proof, at least for the next few years, so I don't have to make any drastic changes for a while. The technologies I have chosen are here to stay, tried and trusted, etc.
